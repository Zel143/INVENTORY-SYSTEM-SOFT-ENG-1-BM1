<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StockSense - Login</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div class="header">
        <img src="STOCKSENCE LOGO.png" alt="StockSense Logo" class="brand-logo">
        <p>Inventory Management System</p>
    </div>

    <div class="login-container">
        <h2>Welcome</h2>
        <form id="loginForm">
            <div class="form-group">
                <input type="text" id="username" class="input-field" placeholder="Username">
            </div>
            <div class="form-group" style="position: relative;">
                <input type="password" id="password" class="input-field" placeholder="Password" style="padding-right: 45px;">
                <button type="button" id="togglePassword" class="password-toggle" title="Show/Hide Password">
                    <i class="fas fa-eye" id="eyeIcon"></i>
                </button>
            </div>
            <div class="form-group">
                <button type="submit" id="loginBtn" class="login-btn">Login</button>
            </div>
        </form>
    </div>

    <script>
        // Password visibility toggle (UAT ID 16)
        document.getElementById('togglePassword').addEventListener('click', function() {
            const passwordField = document.getElementById('password');
            const eyeIcon = document.getElementById('eyeIcon');
            
            if (passwordField.type === 'password') {
                passwordField.type = 'text';
                eyeIcon.classList.remove('fa-eye');
                eyeIcon.classList.add('fa-eye-slash');
            } else {
                passwordField.type = 'password';
                eyeIcon.classList.remove('fa-eye-slash');
                eyeIcon.classList.add('fa-eye');
            }
        });

        document.getElementById('loginForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const user = document.getElementById('username');
            const pass = document.getElementById('password');
            const btn = document.getElementById('loginBtn');
            
            // Hardcoded Credentials for Demo
            // In production, replace with proper authentication
            if (user.value === "admin" && pass.value === "admin") {
                // Set admin session with role
                sessionStorage.setItem("stocksense_logged_in", "true");
                sessionStorage.setItem("stocksense_user", "admin@stocksense.com");
                sessionStorage.setItem("stocksense_user_id", "admin_001");
                sessionStorage.setItem("stocksense_role", "admin");
                sessionStorage.setItem("stocksense_display_name", "System Administrator");
                window.location.href = "dashboard-sqlite.html";
            } else if (user.value === "staff" && pass.value === "staff") {
                // Set staff session with limited role
                sessionStorage.setItem("stocksense_logged_in", "true");
                sessionStorage.setItem("stocksense_user", "staff@stocksense.com");
                sessionStorage.setItem("stocksense_user_id", "staff_001");
                sessionStorage.setItem("stocksense_role", "staff");
                sessionStorage.setItem("stocksense_display_name", "Warehouse Staff");
                window.location.href = "dashboard-sqlite.html";
            } else {
                // Error State
                user.classList.add('error');
                user.value = "Wrong Username";
                pass.classList.add('error');
                pass.type = "text";
                pass.value = "Wrong Password";
                btn.innerText = "Unable to Login";
                btn.classList.add('error-btn');
                
                // Reset logic on focus
                user.onfocus = function() { 
                    if(this.value.includes('Wrong')) { this.value = ''; this.classList.remove('error'); }
                };
                pass.onfocus = function() { 
                    if(this.value.includes('Wrong')) { this.value = ''; this.type='password'; this.classList.remove('error'); }
                };
            }
        });
    </script>
</body>
</html>